<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Intro to GCP Cloud Shell and gcloud | Judah M </title> <meta name="author" content="Judah M "> <meta name="description" content="Learn how to connect to computing resources hosted on Google Cloud via Cloud Shell with the gcloud tool."> <meta name="keywords" content="backend, c++, c, godot, haskell, java, javascript, jekyll, nodejs, python, rust, typescript, unity, unreal"> <meta property="og:site_name" content="Judah M "> <meta property="og:type" content="article"> <meta property="og:title" content="Judah M | Intro to GCP Cloud Shell and gcloud"> <meta property="og:url" content="https://judahsan.github.io/blog/2024/cloud-shell-gcloud/"> <meta property="og:description" content="Learn how to connect to computing resources hosted on Google Cloud via Cloud Shell with the gcloud tool."> <meta property="og:image" content="assets/img/profile_pic.jpg"> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Intro to GCP Cloud Shell and gcloud"> <meta name="twitter:description" content="Learn how to connect to computing resources hosted on Google Cloud via Cloud Shell with the gcloud tool."> <meta name="twitter:image" content="assets/img/profile_pic.jpg"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img//profile_pic.jpg?e79d8219c8359cb07b6340c15c745239"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://judahsan.github.io/blog/2024/cloud-shell-gcloud/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Judah</span> M </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">bio </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Intro to GCP Cloud Shell and gcloud</h1> <p class="post-meta"> Created on October 20, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/gcp"> <i class="fa-solid fa-hashtag fa-sm"></i> gcp</a>   ·   <a href="/blog/category/technology"> <i class="fa-solid fa-tag fa-sm"></i> technology</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Part of <a href="https://www.cloudskillsboost.google/course_templates/621/labs/403398" rel="external nofollow noopener" target="_blank">Google Cloud Skills Boost</a> labs</p> <h4 id="gcloud-and-cloud-shell">Gcloud and Cloud Shell</h4> <p>Google Cloud Shell is an online, browser-based command-line environment provided by Google Cloud Platform. It is a Debian-based virtual machine with a persistent 5 GB home directory, allowing users to manage their GCP resources and projects directly from their web browser.</p> <blockquote> <p><a href="https://en.wikipedia.org/wiki/Google_Cloud_Shell" rel="external nofollow noopener" target="_blank">Wikipedia</a></p> </blockquote> <h3 id="1-create-gcp-account">1. <a href="https://www.geeksforgeeks.org/how-to-create-a-free-tier-account-on-gcp/" rel="external nofollow noopener" target="_blank">Create GCP account</a> </h3> <h3 id="2-activate-cloud-shell">2. Activate Cloud Shell</h3> <ul> <li>Click <strong>Activate Cloud Shell</strong> at the top of the Google Cloud console: Vite utilizes ESBuild, a Go-based bundler, for production builds. ESBuild is renowned for its incredible speed and efficiency.</li> <li>List the active account name</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    gcloud auth list 
</code></pre></div></div> <p>Ouput:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ACTIVE: <span class="k">*</span>
ACCOUNT: &lt;account name&gt;

To <span class="nb">set </span>the active account, run:
    <span class="nv">$ </span>gcloud config <span class="nb">set </span>account <span class="sb">`</span>ACCOUNT<span class="sb">`</span>
</code></pre></div></div> <ul> <li>List the project ID:</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config list project
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>core]
project <span class="o">=</span> qwiklabs-gcp-03-e98c139c8c35
</code></pre></div></div> <h3 id="3-configure-your-environment">3. Configure your environment</h3> <ul> <li><a href="https://cloud.google.com/compute/docs/regions-zones/" rel="external nofollow noopener" target="_blank">Region and zones reading</a></li> </ul> <ol> <li>Set the region to <code class="language-plaintext highlighter-rouge">us-east1</code> </li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config <span class="nb">set </span>compute/region us-east1
</code></pre></div></div> <ol> <li>View the project region setting</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config get-value compute/region
</code></pre></div></div> <ol> <li>Set zone to <code class="language-plaintext highlighter-rouge">us-east1-b</code>:</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config <span class="nb">set </span>compute/zone us-east1-b
</code></pre></div></div> <ol> <li>View project zone setting.</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config get-value compute/zone
</code></pre></div></div> <h3 id="4-project-info">4. Project info</h3> <ol> <li>View project ID</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config get-value project
</code></pre></div></div> <ol> <li>View project details</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud compute project-info describe <span class="nt">--project</span> <span class="si">$(</span>gcloud config get-value project<span class="si">)</span>
</code></pre></div></div> <h3 id="5-setting-environment-variables">5. Setting environment variables</h3> <p>Environment variable define your environment and help save time when you write scripts that contain APIs or executables.</p> <ol> <li>Create an environment variable to store your Project ID.</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PROJECT_ID</span><span class="o">=</span><span class="si">$(</span>gcoud config get-value project<span class="si">)</span>
</code></pre></div></div> <ol> <li>Create on to store your Zone</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ZONE</span><span class="o">=</span><span class="si">$(</span>gcloud config get-value compute/zone<span class="si">)</span>
</code></pre></div></div> <ol> <li>Verification</li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"PROJECT ID: </span><span class="nv">$PROJECT_ID</span><span class="se">\n</span><span class="s2">ZONE: </span><span class="nv">$ZONE</span><span class="s2">"</span>
</code></pre></div></div> <h3 id="6-create-a-virual-machine-with-gcloud">6. Create a virual machine with gcloud</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">gcloud compute</code> allows you to manage your Compute Engine resources in a format that’s simpler than the Compute Engine API.</li> <li> <code class="language-plaintext highlighter-rouge">instances</code> create creates a new instance.</li> <li> <code class="language-plaintext highlighter-rouge">gceinstance</code> is the name of the VM.</li> <li>The <code class="language-plaintext highlighter-rouge">--machine-type</code> flag specifies the machine type as e2-medium.</li> <li>The <code class="language-plaintext highlighter-rouge">--zone</code> flag specifies where the VM is created.</li> <li>If you omit the <code class="language-plaintext highlighter-rouge">--zone</code> flag, the gcloud tool can infer your desired zone based on your default properties. Other required instance settings, such as machine type and image, are set to default values if not specified in the create command.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud compute instances create gceinstance <span class="nt">--machine-type</span> e2-medium <span class="nt">--zone</span> <span class="nv">$ZONE</span>
</code></pre></div></div> <h3 id="7-exploring-commands">7. Exploring commands</h3> <p>The gcloud tool offers simple usage guidelines that are available by adding the -h flag (for help) onto the end of any gcloud command.</p> <ol> <li>Help command: <code class="language-plaintext highlighter-rouge">gcloud -h</code> </li> <li>Verbose help command: <code class="language-plaintext highlighter-rouge">gcloud config --help</code> or <code class="language-plaintext highlighter-rouge">gcloud help config</code> . Type Q and hit Enter to exit</li> </ol> <p>There are global flags in gcloud that govern the behavior of commands on a per-invocation level. Flags override any values set in SDK properties.</p> <ol> <li>View the list of configurations in your environment: <code class="language-plaintext highlighter-rouge">gcloud config list</code> </li> <li>See all properties and their settings: <code class="language-plaintext highlighter-rouge">gcloud config list --all</code> </li> <li>List your components: <code class="language-plaintext highlighter-rouge">gcloud component lists</code> This displays the <code class="language-plaintext highlighter-rouge">gcloud</code> components that are ready for use.</li> </ol> <h3 id="8-filtering-command-line-output">8. Filtering command-line output</h3> <p>Nifty command for displaying specifying information.</p> <ol> <li>List the gceinstance virtual machine: <code class="language-plaintext highlighter-rouge">gcloud compute instances list --filter="name=('gceinstance')"</code> </li> <li>List the firewall rules for the default network: <code class="language-plaintext highlighter-rouge">gcloud compute firewall-rules list --filter="network='default'"</code> </li> <li>List the firewall rules for the default network where the allow rule matches an ICMP rule: <code class="language-plaintext highlighter-rouge">gcloud compute firewall-rules list --filter="NETWORK:'default' AND ALLOW:'icmp'"</code> </li> </ol> <h3 id="9-connecting-to-your-vm-instance">9. Connecting to your VM instance</h3> <ol> <li>Connect to the VM using ssh: <code class="language-plaintext highlighter-rouge">gcloud compute ssh gceinstance --zone $ZONE</code> </li> <li>Type <code class="language-plaintext highlighter-rouge">Y</code> to continue</li> <li>Press <code class="language-plaintext highlighter-rouge">Enter</code> twice to leave the passphrase empty</li> <li>Install nginx: <code class="language-plaintext highlighter-rouge">sudo apt install -y nginx</code> </li> <li>Disconnect from SSH: <code class="language-plaintext highlighter-rouge">exit</code> </li> </ol> <h3 id="10-update-firewall-rules">10. Update firewall rules</h3> <ol> <li>List the project’s firewall rules: <code class="language-plaintext highlighter-rouge">gcloud compute firewall-rules list</code> </li> <li>Try accessing the nginx service running on the <code class="language-plaintext highlighter-rouge">gceinstance</code> virtual machine</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

Note: Communication with the virtual machine will fail as it does not have an appropriate firewall rule. The nginx web server is expecting to communicate on tcp:80. To get communication working you need to:

    Add a tag to the gcelab2 virtual machine
    Add a firewall rule for http traffic


</code></pre></div></div> <ol> <li> <p>Add a tag to the virtual machine: <code class="language-plaintext highlighter-rouge">gcloud compute instances add-tags gcelab2 --tags http-server,https-server</code></p> </li> <li>Update the firewall rule to allow: <code class="language-plaintext highlighter-rouge">gcloud compute firewall-rules create default-allow-http --direction=INGRESS --priority=1000 --network=default --action=ALLOW --rules=tcp:80 --source-ranges=0.0.0.0/0 --target-tags=http-server</code> </li> <li>List the firewall rules for the project: <code class="language-plaintext highlighter-rouge">gcloud compute firewall-rules list --filter=ALLOW:'80'</code> </li> <li>Verify communication is possible for http to the VM:</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://$(gcloud compute instances list --filter=name:gcelab2 --format='value(EXTERNAL_IP)')
</code></pre></div></div> <h3 id="10-logs">10. Logs</h3> <p>Viewing logs is essential to understanding the working of your project. Use gcloud to access the different logs available on Google Cloud.</p> <ol> <li>View available logs on the system: <code class="language-plaintext highlighter-rouge">gcloud logging logs list</code> </li> <li>View logs that relate to compute resources: <code class="language-plaintext highlighter-rouge">gcloud logging logs list --filter="compute"</code> </li> <li>Read Logs related to the resource type of gce_instance:<code class="language-plaintext highlighter-rouge">gcloud logging read "resource.type=gce_instance" --limit 5</code> </li> <li>Read the logs for a specific virtual machine: <code class="language-plaintext highlighter-rouge">gcloud logging read "resource.type=gce_instance AND labels.instance_name='gcelab2'" --limit 5</code> </li> </ol> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/honeypot/">Honeypots, A Lightweight Bot Defense Strategy</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/go-air/">How to set up live reloading Golang</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ollama-open-webui/">Running LLMs Locally with Open Web UI and Ollama</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/k8s/">Google Kubernetes Engine</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/creating-a-build-tool-using-golang/">Creating A Build Tool Using Go</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Judah M . </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-K9CZPVDRMM"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-K9CZPVDRMM');
  </script> <script defer src="/assets/js/google-analytics-setup.js"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/tabs.min.js?b8748955e1076bbe0dabcf28f2549fdc"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>